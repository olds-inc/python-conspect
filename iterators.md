# Итераторы

Всё, к чему можно применить конструкцию __for in__, является итерируемым объектом: списки, строки, файлы… Это удобно, потому что можно считывать из них значения сколько потребуется - однако все значения хранятся в памяти, а это не всегда желательно, если у вас много значений.

Для того чтобы перебрать какую-то последовательно, она должна предоставить нам объект _итератор_, который умеет возвращать следующий элемент и прекращать перебор бросая исключение __StopIteration__

Для получения объекта итератора существует функция `iter(object)`

Для получения следующего значения итератора существует функция `next(iter(object))` принимающая в качестве аргумента объект итератор

Благодаря объектам итераторам работает цикл __for__, работая с итератором его можно переписать тамким образом

```python
some_list = [1, 2, 3, 4]
some_list_iterator = iter(some_list)
while True:
    try:
        i = next(some_list_iterator)
    except StopIteration:
        break
```

Итерация это процесс, включающий итерируемые объекты (реализующие метод `__iter__()`) и итераторы (реализующие `__next__()`). Итерируемые объекты это любые объекты, из которых можно получить итератор. Итераторы это объекты, позволяющие итерировать по итерируемым объектам.

С помощью метода `__iter__()` можно указать что объект является _итерируемым_, и данный метод всегда должен возвращать _объект-итератор_ или _генератора_

_Объект-итератор_ должен содержать метод `__next__()` который возвращает следующий итерируемый элемент или бросать исключение __StopIteration__ если итерируемых элементов не осталось

В следующем примере экземпляр класса `RandomIterator` является _объектом-итератором_

```python
from random import random


class RandomIterator:
    def __init__(self, k=1):
        self.k = k
        self.i = 0

    def __iter__(self):
        return self

    def __next__(self):
        if self.i < self.k:
            self.i += 1
            return random()
        else:
            raise StopIteration


for num in RandomIterator(5):
    print(num)
```